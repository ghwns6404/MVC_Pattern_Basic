<Window x:Class="_0429_데이터바인딩.Window2"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:_0429_데이터바인딩"
        mc:Ignorable="d"
        Title="Window2" Height="450" Width="800">
    <Window.Resources>
        <local:MySort x:Key="mysort" Age="20"/>
        <local:People x:Key="people">
            <local:Person Name = "일지매" Phone = "010-8888-1234" Age="40" Male = "True" />
            <local:Person Name = "임꺽정" Phone = "010-9999-1234" Age="50" Male = "True" />
        </local:People>
        <local:MaleToFemaleConverter x:Key="maleConverter" />
        <local:MaleToStringConverter x:Key="maleStringConverter"/>
    </Window.Resources>
    <StackPanel Name="panel" DataContext="{StaticResource people}">
        <!-- 첫번째 라인 -->
        <Grid >
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <StackPanel Grid.Column="0" Margin="5" Orientation="Horizontal">
                <Label >이름(_N):</Label>
                <TextBox Name="name" Background="Aqua" Text="{Binding Path=Name}" Width="120"/>
            </StackPanel>
            
            <StackPanel Grid.Column="1" Margin="5" Orientation="Horizontal">
                <Label >전화(_P):</Label>
                <TextBox Text="{Binding Path=Phone}" Width="120"/>
            </StackPanel>
            
            <StackPanel Grid.Column="2" Margin="5" Orientation="Horizontal">
                <Label >나이(_A):</Label>
                <TextBox x:Name="age" Width="120">
                    <TextBox.Text>
                        <Binding Path="Age" NotifyOnValidationError="False">
                            <Binding.ValidationRules>
                                <local:AgeValidationRule Min="0" Max="200"/>
                            </Binding.ValidationRules>
                        </Binding>
                    </TextBox.Text>
                </TextBox>
            </StackPanel>
            
            <StackPanel Grid.Column="3" Margin="5" Orientation="Horizontal" Background="LightGreen">
                <RadioButton IsChecked="{Binding Path=Male}" Content="남" Margin="5,5,20,5" />
                <RadioButton IsChecked="{Binding Path=Male, Converter={StaticResource maleConverter}}" Content="여" Margin="5"/>
            </StackPanel>
        </Grid>
        <!-- 두번째 라인 -->
        <Grid >
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Border Grid.Column="0" Margin="2" BorderBrush="Black" BorderThickness="2">
                <Label Height="25" Foreground="{Binding Path=Background, ElementName=name}" Content="{Binding Path=Text, ElementName=name}"/>
            </Border>
            <Border Grid.Column="1" Margin="2" BorderBrush="Black" BorderThickness="2">
                <Label Height="25" Content="{Binding Path=Phone}"/>
            </Border>
            <Border Grid.Column="2" Margin="2" BorderBrush="Black" BorderThickness="2">
                <Label Height="25" Content="{Binding Path=Age}"/>
            </Border>
            <Border Grid.Column="3" Margin="2" BorderBrush="Black" BorderThickness="2">
                <TextBox x:Name="male" Height="25">
                    <TextBox.Text>
                        <Binding Path="Male" Converter="{StaticResource maleStringConverter}" NotifyOnValidationError="True">
                            <Binding.ValidationRules>
                                <local:MaleValidationRule/>
                            </Binding.ValidationRules>
                        </Binding>
                    </TextBox.Text>
                </TextBox>
            </Border>
        </Grid>        
        <!-- 세번째 라인 -->
        <Grid >
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Button Name="prev" Grid.Column="0" Margin="3" Height="30" Content="이전" Click="prev_Click" />
            <Button Name="next" Grid.Column="1" Margin="3" Height="30" Content="다음" Click="next_Click" />
        </Grid>
        <!-- 네번째 라인-->
        <Grid >
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Button Name="eraseButton" Grid.Column="0" Margin="3" Height="30" Content="Clear" Click="eraseButton_Click" />
            <Button Name="removeButton" Grid.Column="1" Margin="3" Height="30" Content="Remove" Click="removeButton_Click"/>
        </Grid>
        <!-- 다섯번째 라인-->
        <Grid >
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Button Name="sortButton" Grid.Column="0" Margin="3" Height="30" Content="정렬" Click="sortButton_Click" />
            <StackPanel Grid.Column="1" Orientation="Horizontal">
                <TextBox Name="sortAge" Text="{Binding Path=Age, Source={StaticResource mysort}}" Margin="3" Height="30" Width="200"/>
                <Button Name="filterButton" Margin="3" Height="30" Width="180" Content="필터" Click="filterButton_Click" />
            </StackPanel>
        </Grid>
        <!--여쓰번째-->
        <Grid >
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Button Name="insertButton" Grid.Column="0" Margin="3" Height="30" Content="저장" Click="insertButton_Click" />
        </Grid>
        <!-- 일곱번째 라인-->
        <!--Listbox는 템플릿이 없으면 기본적으로 ToString에서 가져온다 -->
        <ListBox Name="listbox" ItemsSource="{Binding}" IsSynchronizedWithCurrentItem="True">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <!--데이터 템플릿이란? 일반적으로 두개이상의 속성을 보여주거나
                       문자열이 아닌 더 다양한 형태의 리스트 아이템을 표현할때 사용-->
                    <TextBlock> <!--표현될 수 있는 인라인 요소를 표현하기 위해 사용됨-->
                            <TextBlock Text="{Binding Path=Name}"/>
                            ,
                            <TextBlock Text="{Binding Path=Phone}"/>
                            ,
                            <TextBlock Text="{Binding Path=Male}"/>
                            ,
                            <TextBlock Text="{Binding Path=Age}"/>
                </TextBlock>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </StackPanel>
</Window>
